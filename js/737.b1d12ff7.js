"use strict";(self["webpackChunkweb_shop"]=self["webpackChunkweb_shop"]||[]).push([[737],{2737:function(e,t,a){a.r(t),a.d(t,{default:function(){return Je}});a(7658);var l=a(6252),s=a(9963),o=a(3577);const i=e=>((0,l.dD)("data-v-506c044a"),e=e(),(0,l.Cn)(),e),n=i((()=>(0,l._)("div",{class:"p-3"},[(0,l._)("h1",null,"Thêm sản phẩm")],-1))),r={class:"border shadow p-3"},c=i((()=>(0,l._)("h4",{class:"text-center p-2"},"Thông tin cơ bản",-1))),d={class:"mb-3 row col-md-8"},u=i((()=>(0,l._)("label",{class:"col-sm-4 col-form-label"},"Tên sản phẩm:",-1))),m={class:"col-sm-8"},h=i((()=>(0,l._)("div",{class:"invalid-feedback"},"Tên sản phẩm không được để trống",-1))),p={class:"mb-3 row col-md-8"},b=i((()=>(0,l._)("label",{class:"col-sm-4 col-form-label"},"Danh mục sản phẩm:",-1))),g={class:"col"},v=i((()=>(0,l._)("div",{class:"position-relative"},[(0,l._)("input",{id:"category-id",class:"form-control bg-light-subtle",type:"text",placeholder:"Chọn danh mục sản phẩm",required:""}),(0,l._)("div",{class:"invalid-feedback"},"Chọn danh mục sản phẩm"),(0,l._)("div",{class:"form-control position-absolute top-0 bottom-0 bg-primary opacity-0","aria-label":"default input example","data-bs-toggle":"modal","data-bs-target":"#exampleModal",style:{cursor:"pointer"}})],-1))),y={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},_={class:"modal-dialog modal-dialog-scrollable"},f={class:"modal-content"},w=i((()=>(0,l._)("div",{class:"modal-header"},[(0,l._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Danh mục sản phẩm "),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),k={class:"modal-body"},C={class:"list-group-item border"},x={class:"d-flex justify-content-between align-items-center",style:{height:"50px"}},q={class:"row col-10"},D={class:"col-sm-11"},V={class:"col-sm-1"},L=["value"],T=["data-bs-target","onClick"],U=["id"],H={class:"d-flex justify-content-end"},E={class:"col-md-11"},A={class:"modal-footer"},N=i((()=>(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Huỷ ",-1))),I={class:"mb-3 row col-md-8"},j=i((()=>(0,l._)("label",{class:"col-sm-4 col-form-label"},"Mô tả sản phẩm:",-1))),M={class:"col"},R=i((()=>(0,l._)("div",{class:"invalid-feedback"}," Mô tả sản phẩm không được để trống ",-1))),P={class:"border shadow p-3"},S=i((()=>(0,l._)("h4",{class:"text-center p-2"},"Thông tin bán hàng",-1))),z={class:"mb-3 row p-3"},F={class:"form-check col-md-4"},G=i((()=>(0,l._)("label",{class:"form-check-label",for:"validationFormCheck2"}," Sản phẩm 1 loại ",-1))),K={class:"form-check col-md-4"},Y=i((()=>(0,l._)("label",{class:"form-check-label",for:"validationFormCheck3"}," Phân loại sản phẩm ",-1))),O={key:0,class:"mb-3 row"},W={class:"mb-3 row col-md-8"},$=i((()=>(0,l._)("label",{class:"col-sm-4 col-form-label"},"Hình ảnh sản phẩm:",-1))),B={class:"col-sm-8"},X=i((()=>(0,l._)("div",{class:"invalid-feedback"}," Hình ảnh bị thiếu, hãy chắc chắn sản phẩm có ít nhất một hình đại diện ",-1))),Z=(0,l.uE)('<div class="row col-md-6" data-v-506c044a><label class="form-label" data-v-506c044a> Giá tiền(đồng) </label><div class="col" data-v-506c044a><input class="form-control" type="number" min="1000" placeholder="Nhập vào giá sản phẩm" aria-label="default input example" required data-v-506c044a><div class="invalid-feedback" data-v-506c044a>Giá sản phẩm tối thiểu 1000đ</div></div></div><div class="row col-md-6" data-v-506c044a><label class="form-label" data-v-506c044a> Số lượng trong kho </label><div class="col" data-v-506c044a><input class="form-control" type="number" min="0" placeholder="Nhập vào giá sản phẩm" aria-label="default input example" value="0" required data-v-506c044a><div class="invalid-feedback" data-v-506c044a> Số lượng trong kho không được để trống </div></div></div>',2),J={key:1,class:"mb-3"},Q={class:"border rounded mb-3 p-3"},ee={class:"mb-3 row"},te={class:"col-sm-2 col-form-label"},ae={class:"col-sm-5 col-form-label"},le=["onUpdate:modelValue"],se=i((()=>(0,l._)("div",{class:"invalid-feedback"}," Hãy đặt tên cho nhóm phân loại ",-1))),oe={class:"col-sm-1 col-form-label text-end"},ie=["onClick"],ne={class:"mb-3 p-3"},re={class:"col-sm-2 col-form-label"},ce={class:"col-sm-4 col-form-label"},de=["onUpdate:modelValue"],ue=i((()=>(0,l._)("div",{class:"invalid-feedback"}," Hãy đặt tên cho phân loại ",-1))),me={class:"col-sm-1 col-form-label text-end"},he=["onClick"],pe={class:"col-sm-7 text-center"},be=["onClick"],ge={class:"table-responsive"},ve={class:"table table-striped table-hover table-bordered"},ye={class:"table-secondary"},_e=i((()=>(0,l._)("th",{scope:"col"},"Giá",-1))),fe=i((()=>(0,l._)("th",{scope:"col"},"Kho hàng",-1))),we=i((()=>(0,l._)("th",{scope:"col"},"Hình ảnh",-1))),ke=i((()=>(0,l._)("td",null,[(0,l._)("input",{class:"form-control",type:"text",placeholder:"Nhập giá","aria-label":"default input example",required:""})],-1))),Ce=i((()=>(0,l._)("td",null,[(0,l._)("input",{class:"form-control",type:"number",min:"0",placeholder:"Nhập số lượng trong kho","aria-label":"default input example",required:""})],-1))),xe={class:"col-12 d-flex justify-content-end"},qe={class:"p-3"},De=i((()=>(0,l._)("div",{class:"p-3"},[(0,l._)("button",{class:"btn btn-primary",type:"submit"},"Đăng sản phẩm")],-1))),Ve=["src"];function Le(e,t,a,i,Le,Te){const Ue=(0,l.up)("font-awesome-icon"),He=(0,l.up)("RecursiveCategory"),Ee=(0,l.up)("RecursiveTable");return(0,l.wg)(),(0,l.iD)("div",null,[n,(0,l._)("form",{class:"row g-3 needs-validation",onSubmit:t[10]||(t[10]=(0,s.iM)((e=>Te.formSubmit()),["prevent"])),novalidate:""},[(0,l._)("div",r,[c,(0,l._)("div",d,[u,(0,l._)("div",m,[(0,l.wy)((0,l._)("input",{class:"form-control",type:"text",placeholder:"Nhập vào tên sản phẩm","aria-label":"default input example","onUpdate:modelValue":t[0]||(t[0]=e=>Le.productName=e),required:""},null,512),[[s.nr,Le.productName]]),h])]),(0,l._)("div",p,[b,(0,l._)("div",g,[v,(0,l._)("div",y,[(0,l._)("div",_,[(0,l._)("div",f,[w,(0,l._)("div",k,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Le.categorys,(e=>((0,l.wg)(),(0,l.iD)("ul",{class:"list-group list-group-flush",key:e.id},[(0,l._)("div",C,[(0,l._)("div",x,[(0,l._)("div",q,[(0,l._)("div",D,(0,o.zw)(e.categoryName),1),(0,l._)("div",V,[(0,l.wy)((0,l._)("input",{type:"radio",class:"form-check-input border border-secondary",id:"validationFormCheck2","onUpdate:modelValue":t[1]||(t[1]=e=>Le.categoryChoseTemp=e),value:e.id,name:"radio-stacked"},null,8,L),[[s.G2,Le.categoryChoseTemp]])])]),0!=e.categoryChild.length?((0,l.wg)(),(0,l.iD)("button",{key:0,class:"list-group-item accordion-button btn-show-list",type:"button","data-bs-toggle":"collapse","data-bs-target":`#collapseTwo${e.id}`,"aria-expanded":"false",onClick:t=>Te.toggleElement(e.id)},[0==Le.elements[e.id]?((0,l.wg)(),(0,l.j4)(Ue,{key:0,icon:["fas","angle-down"]})):(0,l.kq)("",!0),1==Le.elements[e.id]?((0,l.wg)(),(0,l.j4)(Ue,{key:1,icon:["fas","angle-up"]})):(0,l.kq)("",!0)],8,T)):(0,l.kq)("",!0)]),(0,l._)("div",{id:"collapseTwo"+e.id,class:"accordion-collapse collapse"},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.categoryChild,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e},[(0,l._)("div",H,[(0,l._)("div",E,[(0,l.Wm)(He,{category:e,baseUrl:a.baseUrl,onCategoryChose:Te.changeCategoryEvent},null,8,["category","baseUrl","onCategoryChose"])])])])))),128))],8,U)])])))),128))]),(0,l._)("div",A,[N,(0,l._)("button",{type:"button","data-bs-dismiss":"modal",onClick:t[2]||(t[2]=e=>Te.btnChangeCategory()),class:"btn btn-primary"}," Chọn ")])])])])])]),(0,l._)("div",I,[j,(0,l._)("div",M,[(0,l.wy)((0,l._)("textarea",{class:"form-control",id:"validationTextarea",placeholder:"Nhập vào mô tả sản phẩm","onUpdate:modelValue":t[3]||(t[3]=e=>Le.description=e),required:""},"\r\n            ",512),[[s.nr,Le.description]]),R])])]),(0,l._)("div",P,[S,(0,l._)("div",z,[(0,l._)("div",F,[(0,l.wy)((0,l._)("input",{type:"radio",class:"form-check-input",id:"validationFormCheck2",name:"radio-stacked2","onUpdate:modelValue":t[4]||(t[4]=e=>Le.isClassify=e),value:"false"},null,512),[[s.G2,Le.isClassify]]),G]),(0,l._)("div",K,[(0,l.wy)((0,l._)("input",{type:"radio",class:"form-check-input",id:"validationFormCheck3",name:"radio-stacked2","onUpdate:modelValue":t[5]||(t[5]=e=>Le.isClassify=e),value:"true"},null,512),[[s.G2,Le.isClassify]]),Y])]),"false"==Le.isClassify?((0,l.wg)(),(0,l.iD)("div",O,[(0,l._)("div",W,[$,(0,l._)("div",B,[(0,l._)("input",{class:"form-control",type:"file",id:"formFile",multiple:"",required:"",onChange:t[6]||(t[6]=(...e)=>Te.inputImageProduct&&Te.inputImageProduct(...e))},null,32),X])]),Z])):(0,l.kq)("",!0),"true"==Le.isClassify?((0,l.wg)(),(0,l.iD)("div",J,[(0,l._)("div",Q,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Le.attributes,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{class:"border mb-3 p-3",key:t},[(0,l._)("div",ee,[(0,l._)("label",te," - Nhóm phân loại "+(0,o.zw)(t+1)+": ",1),(0,l._)("div",ae,[(0,l.wy)((0,l._)("input",{class:"form-control","onUpdate:modelValue":t=>e.name=t,required:""},null,8,le),[[s.nr,e.name]]),se]),(0,l._)("div",oe,[(0,l._)("div",{class:"btn btn-outline-danger",type:"button",onClick:e=>Te.removeAttribute(t)}," Xóa ",8,ie)]),(0,l._)("div",ne,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.attributeValues,((e,a)=>((0,l.wg)(),(0,l.iD)("div",{class:"mb-3 row p-3",key:a},[(0,l._)("label",re," + Phân loại: "+(0,o.zw)(a+1),1),(0,l._)("div",ce,[(0,l.wy)((0,l._)("input",{class:"form-control","onUpdate:modelValue":t=>e.value=t,required:""},null,8,de),[[s.nr,e.value]]),ue]),(0,l._)("div",me,[(0,l._)("div",{class:"btn btn-outline-danger",type:"button",onClick:e=>Te.removeAttributeValue(t,a)}," Xóa ",8,he)])])))),128)),(0,l._)("div",pe,[(0,l._)("button",{type:"button",class:"btn m-3 btn-primary",onClick:e=>Te.addAttributeValue(t)}," Thêm phân loại nhóm "+(0,o.zw)(t+1)+" + ",9,be)])])])])))),128)),(0,l._)("button",{type:"button",class:"btn m-3 btn-primary",onClick:t[7]||(t[7]=e=>Te.addAttribute())}," Thêm nhóm phân loại + ")]),(0,l._)("div",ge,[(0,l._)("table",ve,[(0,l._)("thead",ye,[(0,l._)("tr",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Le.attributes,((e,t)=>((0,l.wg)(),(0,l.iD)("th",{key:t,scope:"col"},(0,o.zw)(e.name),1)))),128)),_e,fe,we])]),(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Te.tableLength[0],(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e},[(0,l.Wm)(Ee,{attributes:Le.attributes,recursive:0,tableLength:Te.tableLength,index:e},null,8,["attributes","tableLength","index"]),ke,Ce,(0,l._)("td",null,[(0,l._)("input",{class:"form-control",type:"file",id:"formFile",multiple:"",required:"",onChange:t[8]||(t[8]=(...e)=>Te.inputImageProduct&&Te.inputImageProduct(...e))},null,32)])])))),128))])])])])):(0,l.kq)("",!0)]),(0,l._)("div",xe,[(0,l._)("div",qe,[(0,l._)("div",{class:"btn btn-danger",onClick:t[9]||(t[9]=t=>e.$router.push("/seller/product/list"))}," Hủy ")]),De])],32),(0,l._)("img",{src:a.baseUrl+"/auth/file/607a525b8ee8417da50cde7968617ce9.jpg",alt:""},null,8,Ve)])}a(6229),a(7330),a(2062);const Te=["rowspan"];function Ue(e,t,a,s,i,n){const r=(0,l.up)("RecursiveTable",!0);return(0,l.wg)(),(0,l.iD)(l.HY,null,[(a.index-1)%a.tableLength[a.recursive+1]==0?((0,l.wg)(),(0,l.iD)("td",{key:0,rowspan:a.tableLength[a.recursive+1]},(0,o.zw)(a.attributes[a.recursive].attributeValues[Math.floor((a.index-1)/a.tableLength[a.recursive+1]%a.attributes[a.recursive].attributeValues.length)].value),9,Te)):(0,l.kq)("",!0),a.recursive+1<a.attributes.length?((0,l.wg)(),(0,l.j4)(r,{key:1,attributes:a.attributes,recursive:a.recursive+1,tableLength:a.tableLength,index:a.index},null,8,["attributes","recursive","tableLength","index"])):(0,l.kq)("",!0)],64)}var He={data(){return{}},props:["attributes","recursive","tableLength","index"],methods:{},created(){}},Ee=a(3744);const Ae=(0,Ee.Z)(He,[["render",Ue],["__scopeId","data-v-81686a84"]]);var Ne=Ae;const Ie={class:"d-flex justify-content-between align-items-center list-group-item",style:{height:"50px"}},je={class:"row col-10"},Me={class:"col-sm-11"},Re={class:"col-sm-1"},Pe=["value"],Se=["data-bs-target"],ze={class:"d-flex justify-content-between"},Fe=["id"],Ge={class:"d-flex justify-content-end"},Ke={class:"col-md-11"};function Ye(e,t,a,i,n,r){const c=(0,l.up)("font-awesome-icon"),d=(0,l.up)("RecursiveCategory",!0);return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",Ie,[(0,l._)("div",je,[(0,l._)("div",Me,(0,o.zw)(a.category.categoryName),1),(0,l._)("div",Re,[(0,l.wy)((0,l._)("input",{type:"radio",class:"form-check-input border border-secondary",id:"validationFormCheck2","onUpdate:modelValue":t[0]||(t[0]=e=>n.categoryChose=e),value:a.category.id,name:"radio-stacked",onChange:t[1]||(t[1]=e=>r.changeEvent())},null,40,Pe),[[s.G2,n.categoryChose]])])]),(0,l._)("button",{class:"accordion-button btn-show-list","data-bs-toggle":"collapse","data-bs-target":`#collapseOne${a.category.id}`,"aria-expanded":"true","aria-controls":"`collapseOne` + category.id"},[(0,l._)("div",ze,[0!=a.category.categoryChild.length?((0,l.wg)(),(0,l.iD)("div",{key:0,onClick:t[2]||(t[2]=(...e)=>r.toggleElement&&r.toggleElement(...e))},[0==n.elements?((0,l.wg)(),(0,l.j4)(c,{key:0,icon:["fas","angle-down"]})):(0,l.kq)("",!0),1==n.elements?((0,l.wg)(),(0,l.j4)(c,{key:1,icon:["fas","angle-up"]})):(0,l.kq)("",!0)])):(0,l.kq)("",!0)])],8,Se)]),(0,l._)("div",{id:"collapseOne"+a.category.id,class:"accordion-collapse collapse","data-bs-parent":"#accordionExample"},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.category.categoryChild,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e},[(0,l._)("div",Ge,[(0,l._)("div",Ke,[(0,l.Wm)(d,{category:e,onCategoryChose:r.changeCategoryEvent},null,8,["category","onCategoryChose"])])])])))),128))],8,Fe)])}var Oe={data(){return{categoryChose:"",elements:!1}},props:["category"],methods:{toggleElement(){this.elements=!this.elements},changeEvent(){this.$emit("categoryChose",this.categoryChose)},changeCategoryEvent(e){this.categoryChose=e,this.$emit("categoryChose",this.categoryChose)}},created(){}};const We=(0,Ee.Z)(Oe,[["render",Ye],["__scopeId","data-v-3c1f003e"]]);var $e=We,Be=a(6154),Xe={components:{RecursiveTable:Ne,RecursiveCategory:$e},data(){return{categorys:[],productName:"",categoryChose:{},categoryChoseTemp:{},elements:{},isClassify:"false",isCheckedModal:!0,imgage:[],price:{},description:"",attributes:[{name:"",attributeValues:[{value:""}]}]}},props:["baseUrl"],methods:{formSubmit(){const e=document.querySelectorAll(".needs-validation");Array.from(e).forEach((e=>{e.checkValidity()?(alert("Đăng sản phẩm thành công"),this.addProduct()):e.classList.add("was-validated")}))},inputImageProduct(e){this.imgage.push(e.target.files[0])},addAttribute(){this.attributes.push({name:"",attributeValues:[{value:""}]})},removeAttribute(e){this.attributes.splice(e,1)},addAttributeValue(e){this.attributes[e].attributeValues.push({value:""})},removeAttributeValue(e,t){this.attributes[e].attributeValues.splice(t,1)},async getListCategory(){try{const e=await Be["default"].get(this.baseUrl+"/product/category?parent=1");return this.categorys=await e.data.content,this.elements=Array(this.categorys.length).fill(!1),e.data.content}catch(e){console.error(e)}},async getCategoryById(e){try{const t=await Be["default"].get(this.baseUrl+"/product/category/"+e);return t.data}catch(t){console.error(t)}},toggleElement(e){this.elements[e]=!this.elements[e]},async addProduct(){try{const e=await Be["default"].post(this.baseUrl+"/product/product",{productName:this.productName,category:{id:this.categoryChose},description:this.description},{headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer "+localStorage.getItem("token")}});return e.data}catch(e){console.error(e)}},changeCategoryEvent(e){this.categoryChoseTemp=e},async btnChangeCategory(){this.categoryChose=this.categoryChoseTemp;const e=document.getElementById("category-id");e.value=(await this.getCategoryById(this.categoryChose)).categoryName},async loadImageWithHeader(){const e=document.querySelectorAll("img");e.forEach((e=>{const t=e.src,a=new XMLHttpRequest;a.open("GET",t,!0),a.setRequestHeader("ngrok-skip-browser-warning","ngrok"),a.responseType="blob",a.onload=()=>{if(200===a.status){const t=a.response,l=URL.createObjectURL(t);e.src=l}},a.send()}))}},async created(){this.getListCategory()},async mounted(){this.loadImageWithHeader()},computed:{tableLength(){var e=[],t=1;e.push(t);for(var a=this.attributes.length;a>0;a--)t*=this.attributes[a-1].attributeValues.length,e.push(t);return e=e.reverse(),e}}};const Ze=(0,Ee.Z)(Xe,[["render",Le],["__scopeId","data-v-506c044a"]]);var Je=Ze}}]);
//# sourceMappingURL=737.b1d12ff7.js.map